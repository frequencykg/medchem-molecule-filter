# Filter Pattern Image Generation

This directory contains a script to generate visual representations of all SMARTS patterns used in the medchem-molecule-filter library.

## Overview

The `generate_pattern_images.py` script creates PNG images for all filter patterns defined in:
- `medchem_filter/data/pains_patterns.py` (19 patterns)
- `medchem_filter/data/reactive_patterns.py` (22 patterns)
- `medchem_filter/data/heterocycle_patterns.py` (31 patterns)

Total: **72 pattern images**

## Generated Images

Images are stored in `_static/pattern_images/` and organized by filter type:
- `_static/pattern_images/pains/` - PAINS pattern images
- `_static/pattern_images/reactive/` - Reactive group pattern images
- `_static/pattern_images/heterocycle/` - Heterocycle pattern images

## How to Regenerate Images

If you add new patterns or modify existing ones, regenerate the images:

```bash
cd docs
python generate_pattern_images.py
```

This will:
1. Parse all SMARTS patterns from the pattern data files
2. Generate 2D structure images using RDKit
3. Save PNG images (300x300 pixels) to the appropriate directories

## Requirements

The script requires:
- RDKit (for parsing SMARTS and drawing molecules)
- Pillow (for image generation)

These are installed automatically with the `[docs]` extra:
```bash
pip install -e ".[docs]"
```

## Integration with Documentation

The generated images are automatically included in the Sphinx documentation build process:
1. Images are referenced in `filter_rules.rst` using reStructuredText `.. image::` directives
2. Sphinx copies images from `_static/` to `_build/html/_images/` during the build
3. The HTML documentation displays each pattern with its SMARTS string and visual representation

To rebuild the documentation with the images:
```bash
cd docs
make clean
make html
```

## Image Format

Each image:
- Size: 300x300 pixels
- Format: PNG
- Content: 2D structure drawing of the SMARTS pattern generated by RDKit
- Naming: `{pattern_name}.png` (matches the key in the pattern dictionaries)

## Notes

- If a SMARTS pattern cannot be parsed, a warning will be printed, and no image will be generated for that pattern
- All successfully generated images are listed in the script output
- The script is idempotent - running it multiple times will overwrite existing images with fresh versions
